(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab43a"],{1511:function(t,s,a){"use strict";a.r(s);var r=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container py-5"},[s("main",{attrs:{role:"main"}},[s("div",{staticClass:"album py-5 bg-light"},[s("div",{staticClass:"container"},[s("UserProfileCard",{attrs:{profile:t.profile,initialIsFollowed:t.isFollowed}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4"},[s("UserFollowingsCard",{attrs:{followings:t.profile.followings}}),s("br"),s("UserFollowersCard",{attrs:{followers:t.profile.followers}})],1),s("div",{staticClass:"col-md-8"},[s("UserCommentsCard",{attrs:{comments:t.profile.comments}}),s("br"),s("UserFavoritedRestaurantsCard",{attrs:{favoritedRestaurants:t.profile.favoritedRestaurants}})],1)])],1)])])])},e=[],i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"card mb-3"},[s("div",{staticClass:"row no-gutters"},[s("div",{staticClass:"col-md-4"},[s("img",{attrs:{src:t.profile.image,width:"300px",height:"300px"}})]),s("div",{staticClass:"col-md-8"},[s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v(t._s(t.profile.name))]),s("p",{staticClass:"card-text"},[t._v(t._s(t.profile.email))]),s("ul",{staticClass:"list-unstyled list-inline"},[s("li",[s("strong",[t._v(t._s(t.profile.comments.length))]),t._v(" 已評論餐廳 ")]),s("li",[s("strong",[t._v(t._s(t.profile.favoritedRestaurants.length))]),t._v(" 收藏的餐廳 ")]),s("li",[s("strong",[t._v(t._s(t.profile.followings.length))]),t._v(" followings (追蹤者) ")]),s("li",[s("strong",[t._v(t._s(t.profile.followers.length))]),t._v(" followers (追隨者) ")])]),s("p",[t.checkedUser(t.profile.id)?s("router-link",{attrs:{to:{name:"user-edit",params:{id:t.profile.id}}}},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v(" edit ")])]):[this.isFollowed?s("button",{staticClass:"btn btn-danger",attrs:{type:"submit"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteFollowing(t.profile.id)}}},[t._v(" 取消追蹤 ")]):s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.addFollowing(t.profile.id)}}},[t._v(" 追蹤 ")])]],2)])])])])},l=[],o=(a("d9e2"),a("2f62")),n=a("2fa3"),d=a("4cce"),c={name:"UserProfileCard",props:{profile:{type:Object,required:!0},initialIsFollowed:{type:Boolean,required:!0}},data(){return{isFollowed:this.initialIsFollowed}},computed:{...Object(o["b"])(["currentUser","isAuthenticated"])},methods:{checkedUser(t){if(t===this.currentUser.id)return!0},async addFollowing(t){try{const s=await d["a"].addFollowing(t);if("success"!==s.data.status)throw new Error(s.data.message);this.isFollowed=!0}catch(s){n["a"].fire({icon:"warning",title:"無法追蹤"})}},async deleteFollowing(t){try{const s=await d["a"].deleteFollowing(t);if("success"!==s.data.status)throw new Error(s.data.message);this.isFollowed=!1}catch(s){n["a"].fire({icon:"warning",title:"無法取消"})}}}},u=c,f=a("2877"),m=Object(f["a"])(u,i,l,!1,null,null,null),p=m.exports,g=function(){var t=this,s=t._self._c;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("strong",[t._v(t._s(t.followings.length))]),t._v(" followings (追蹤者) ")]),s("div",{staticClass:"card-body"},t._l(t.followings,(function(t){return s("router-link",{key:t.id,staticStyle:{"margin-right":"10px"},attrs:{to:{name:"user",params:{id:t.id}}}},[s("img",{staticClass:"avatar",attrs:{src:t.image,width:"60",height:"60"}})])})),1)])},v=[],w={name:"UserFollowingsCard",props:{followings:{type:Array,required:!0}}},h=w,C=Object(f["a"])(h,g,v,!1,null,null,null),_=C.exports,y=function(){var t=this,s=t._self._c;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("strong",[t._v(t._s(t.followers.length))]),t._v(" followers (追隨者) ")]),s("div",{staticClass:"card-body"},t._l(t.followers,(function(t){return s("router-link",{key:t.id,attrs:{to:{name:"user",params:{id:t.id}}}},[s("img",{staticClass:"avatar",attrs:{src:t.image,width:"60",height:"60"}})])})),1)])},b=[],F={name:"UserFollowersCard",props:{followers:{type:Array,required:!0}}},U=F,k=Object(f["a"])(U,y,b,!1,null,null,null),R=k.exports,x=function(){var t=this,s=t._self._c;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("strong",[t._v(t._s(t.comments.length))]),t._v(" 已評論餐廳 ")]),s("div",{staticClass:"card-body"},t._l(t.comments,(function(t){return s("router-link",{key:t.id,staticStyle:{"margin-right":"10px"},attrs:{to:{name:"restaurant",params:{id:t.Restaurant.id}}}},[s("img",{staticClass:"avatar",attrs:{src:t.Restaurant.image,width:"60",height:"60"}})])})),1)])},j=[],O={name:"",props:{comments:{type:Array,required:!0}}},q=O,A=Object(f["a"])(q,x,j,!1,null,null,null),P=A.exports,I=function(){var t=this,s=t._self._c;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("strong",[t._v(t._s(t.favoritedRestaurants.length))]),t._v(" 收藏的餐廳 ")]),s("div",{staticClass:"card-body"},t._l(t.favoritedRestaurants,(function(t){return s("router-link",{key:t.id,staticStyle:{"margin-right":"10px"},attrs:{to:{name:"restaurant",params:{id:t.Favorite.RestaurantId}}}},[s("img",{staticClass:"avatar",attrs:{src:t.image,width:"60",height:"60"}})])})),1)])},S=[],D={name:"UserFavoritedRestaurantsCard",props:{favoritedRestaurants:{type:Array,required:!0}}},E=D,J=Object(f["a"])(E,I,S,!1,null,null,null),B=J.exports,$={name:"User",components:{UserProfileCard:p,UserFollowingsCard:_,UserFollowersCard:R,UserCommentsCard:P,UserFavoritedRestaurantsCard:B},data(){return{profile:{id:-1,name:"",email:"",image:"",comments:[],favoritedRestaurants:[],followers:[],followings:[]},isFollowed:!1}},methods:{async fetchUser(t){try{const{data:s}=await d["a"].get(t),{isFollowed:a,profile:r}=s,{id:e,name:i,email:l,image:o,Comments:n,FavoritedRestaurants:c,Followers:u,Followings:f}=r;this.profile={id:e,name:i,email:l,image:o,comments:n,favoritedRestaurants:c,followers:u,followings:f},this.isFollowed=a}catch(s){n["a"].fire({icon:"warning",title:"無法讀取"})}}},created(){const{id:t}=this.$route.params;this.fetchUser(t)}},z=$,G=Object(f["a"])(z,r,e,!1,null,null,null);s["default"]=G.exports}}]);
//# sourceMappingURL=chunk-2d0ab43a.7cf99651.js.map